---
import '../styles/global.css';

export interface Props {
  title: string;
  description?: string;
  lang: 'en' | 'es';
  keywords?: string;
  ogImage?: string;
  canonicalUrl?: string;
  structuredData?: any;
}

const {
  title,
  description = lang === 'es'
    ? 'Coaching ejecutivo y desarrollo de liderazgo profesional. Transforma tu carrera con Ana Perez-Mena, coach certificada con 20+ años de experiencia en Molson Coors.'
    : 'Executive coaching and professional leadership development. Transform your career with Ana Perez-Mena, certified coach with 20+ years experience at Molson Coors.',
  lang,
  keywords = lang === 'es'
    ? 'coaching ejecutivo, desarrollo de liderazgo, coach profesional, transformación de carrera, coaching de equipos, Ana Perez-Mena, NextLevel Coaching, coaching empresarial, mentoria ejecutiva'
    : 'executive coaching, leadership development, professional coach, career transformation, team coaching, Ana Perez-Mena, NextLevel Coaching, business coaching, executive mentoring',
  ogImage = `${import.meta.env.SITE}${import.meta.env.BASE_URL}og-image.jpg`,
  canonicalUrl = Astro.url.href,
  structuredData
} = Astro.props;

// Default Organization structured data
const organizationSchema = {
  '@context': 'https://schema.org',
  '@type': 'ProfessionalService',
  name: 'NextLevel Coaching',
  founder: {
    '@type': 'Person',
    name: 'Ana Perez-Mena',
    jobTitle: 'Executive Coach & Leadership Development Specialist',
    alumniOf: 'Molson Coors',
    knowsAbout: ['Executive Coaching', 'Leadership Development', 'Team Building', 'Career Transformation']
  },
  description: lang === 'es'
    ? 'Servicios profesionales de coaching ejecutivo y desarrollo de liderazgo'
    : 'Professional executive coaching and leadership development services',
  url: import.meta.env.SITE,
  telephone: '+1-XXX-XXX-XXXX',
  priceRange: '$$$$',
  address: {
    '@type': 'PostalAddress',
    addressCountry: 'US'
  },
  sameAs: [
    'https://www.linkedin.com/in/ana-cristina-perez-mena/'
  ],
  serviceType: ['Executive Coaching', 'Leadership Development', 'Team Coaching', 'Career Coaching']
};

// Combine default and custom structured data
const finalStructuredData = structuredData ? [organizationSchema, structuredData] : organizationSchema;
---

<!doctype html>
<html lang={lang} class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <title>{title}</title>

    <!-- Primary Meta Tags for SEO -->
    <meta name="title" content={title} />
    <meta name="description" content={description} />
    <meta name="keywords" content={keywords} />
    <meta name="author" content="Ana Perez-Mena" />
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=5.0" />
    <meta name="generator" content={Astro.generator} />

    <!-- Canonical URL for duplicate content prevention -->
    <link rel="canonical" href={canonicalUrl} />

    <!-- Language Alternates for SEO -->
    <link rel="alternate" hreflang="en" href={`${import.meta.env.SITE}${import.meta.env.BASE_URL}`} />
    <link rel="alternate" hreflang="es" href={`${import.meta.env.SITE}${import.meta.env.BASE_URL}es/`} />
    <link rel="alternate" hreflang="x-default" href={`${import.meta.env.SITE}${import.meta.env.BASE_URL}`} />

    <!-- Open Graph / Facebook Meta Tags -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalUrl} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={ogImage} />
    <meta property="og:image:width" content="1200" />
    <meta property="og:image:height" content="630" />
    <meta property="og:locale" content={lang === 'es' ? 'es_ES' : 'en_US'} />
    <meta property="og:site_name" content="NextLevel Coaching" />

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:url" content={canonicalUrl} />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImage} />
    <meta name="twitter:creator" content="@nextlevelcoach" />

    <!-- Favicon and App Icons -->
    <link rel="icon" type="image/svg+xml" href={`${import.meta.env.BASE_URL}favicon.svg`} />
    <link rel="apple-touch-icon" sizes="180x180" href={`${import.meta.env.BASE_URL}apple-touch-icon.png`} />
    <link rel="icon" type="image/png" sizes="32x32" href={`${import.meta.env.BASE_URL}favicon-32x32.png`} />
    <link rel="icon" type="image/png" sizes="16x16" href={`${import.meta.env.BASE_URL}favicon-16x16.png`} />
    <link rel="manifest" href={`${import.meta.env.BASE_URL}site.webmanifest`} />

    <!-- Performance Optimization: Preconnect to External Domains -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="dns-prefetch" href="https://fonts.googleapis.com">
    <link rel="dns-prefetch" href="https://fonts.gstatic.com">

    <!-- Optimized Font Loading with display=swap for better LCP -->
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

    <!-- JSON-LD Structured Data for Rich Results -->
    <script type="application/ld+json" set:html={JSON.stringify(finalStructuredData)} />

    <!-- Additional SEO Schema: WebPage -->
    <script type="application/ld+json" set:html={JSON.stringify({
      '@context': 'https://schema.org',
      '@type': 'WebPage',
      name: title,
      description: description,
      url: canonicalUrl,
      inLanguage: lang,
      primaryImageOfPage: ogImage,
      breadcrumb: {
        '@type': 'BreadcrumbList',
        itemListElement: [
          {
            '@type': 'ListItem',
            position: 1,
            name: lang === 'es' ? 'Inicio' : 'Home',
            item: `${import.meta.env.SITE}${import.meta.env.BASE_URL}${lang === 'es' ? 'es/' : ''}`
          }
        ]
      },
      potentialAction: {
        '@type': 'ContactAction',
        target: {
          '@type': 'EntryPoint',
          urlTemplate: `${import.meta.env.SITE}${import.meta.env.BASE_URL}${lang === 'es' ? 'es/' : ''}#contact`
        },
        name: lang === 'es' ? 'Contactar' : 'Contact'
      }
    })} />
  </head>
  <body class="min-h-screen bg-white text-gray-900 font-sans antialiased">
    <slot />
  </body>
</html>